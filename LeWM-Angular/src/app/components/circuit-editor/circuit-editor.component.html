<div class="circuit-editor">
  <div class="toolbar">
    <h3>Component Library</h3>
    <div class="component-buttons">
      <button *ngFor="let comp of availableComponents" 
              (click)="addComponent(comp.type)"
              class="component-btn">
        + {{ comp.label }}
      </button>
    </div>
    
    <div class="controls">
      <h4>Controls</h4>
      <button (click)="clearConnections()" class="clear-btn">
        Clear Connections
      </button>
      <div class="info">
        <p>Selected: {{ selectedComponents.size }}</p>
        <small>Click to select • Ctrl+Click for multi-select • Delete to remove</small>
      </div>
    </div>
  </div>
  
  <div class="canvas-container">
    <svg #svgCanvas 
         class="circuit-canvas"
         width="100%" 
         height="100%"
         (mousedown)="onMouseDown($event)"
         (mousemove)="onMouseMove($event)"
         (mouseup)="onMouseUp($event)">
      
      <!-- Grid pattern -->
      <defs>
        <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
          <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#f0f0f0" stroke-width="1"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#grid)" />
      
      <!-- Components -->
      <g *ngFor="let component of components" 
         (mousedown)="onComponentMouseDown($event, component.id)"
         [attr.class]="'component ' + (selectedComponents.has(component.id) ? 'selected' : '')">
        <rect [attr.x]="component.x" 
              [attr.y]="component.y" 
              [attr.width]="component.width" 
              [attr.height]="component.height"
              [attr.fill]="selectedComponents.has(component.id) ? '#4a90e2' : '#f0f0f0'"
              stroke="#333" 
              stroke-width="2"
              style="cursor: move" />
        <text [attr.x]="component.x + component.width/2" 
              [attr.y]="component.y + component.height/2 + 5" 
              text-anchor="middle" 
              font-size="12" 
              font-weight="bold">
          {{ component.label }}
        </text>
      </g>
      
      <!-- Selection box -->
      <rect *ngIf="selectionBox"
            [attr.x]="Math.min(selectionBox.startX, selectionBox.endX)"
            [attr.y]="Math.min(selectionBox.startY, selectionBox.endY)"
            [attr.width]="Math.abs(selectionBox.endX - selectionBox.startX)"
            [attr.height]="Math.abs(selectionBox.endY - selectionBox.startY)"
            fill="rgba(74, 144, 226, 0.2)"
            stroke="#4a90e2"
            stroke-width="2"
            stroke-dasharray="5,5"
            pointer-events="none" />
    </svg>
  </div>
</div>